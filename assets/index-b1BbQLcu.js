import{r as n,M as $,j as R,b as I,P as z,c as D,d as N,e as U,g as A}from"./index-DUoWTvI8.js";class H extends n.Component{getSnapshotBeforeUpdate(c){const t=this.props.childRef.current;if(t&&c.isPresent&&!this.props.isPresent){const e=t.offsetParent,s=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function B({children:o,isPresent:c,anchorX:t}){const e=n.useId(),s=n.useRef(null),r=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=n.useContext($);return n.useInsertionEffect(()=>{const{width:y,height:a,top:m,left:i,right:l}=r.current;if(c||!s.current||!y||!a)return;const u=t==="left"?`left: ${i}`:`right: ${l}`;s.current.dataset.motionPopId=e;const f=document.createElement("style");return h&&(f.nonce=h),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${a}px !important;
            ${u}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[c]),R.jsx(H,{isPresent:c,childRef:s,sizeRef:r,children:n.cloneElement(o,{ref:s})})}const K=({children:o,initial:c,isPresent:t,onExitComplete:e,custom:s,presenceAffectsLayout:r,mode:h,anchorX:y})=>{const a=I(V),m=n.useId(),i=n.useCallback(u=>{a.set(u,!0);for(const f of a.values())if(!f)return;e&&e()},[a,e]),l=n.useMemo(()=>({id:m,initial:c,isPresent:t,custom:s,onExitComplete:i,register:u=>(a.set(u,!1),()=>a.delete(u))}),r?[Math.random(),i]:[t,i]);return n.useMemo(()=>{a.forEach((u,f)=>a.set(f,!1))},[t]),n.useEffect(()=>{!t&&!a.size&&e&&e()},[t]),h==="popLayout"&&(o=R.jsx(B,{isPresent:t,anchorX:y,children:o})),R.jsx(z.Provider,{value:l,children:o})};function V(){return new Map}const P=o=>o.key||"";function _(o){const c=[];return n.Children.forEach(o,t=>{n.isValidElement(t)&&c.push(t)}),c}const Z=({children:o,custom:c,initial:t=!0,onExitComplete:e,presenceAffectsLayout:s=!0,mode:r="sync",propagate:h=!1,anchorX:y="left"})=>{const[a,m]=D(h),i=n.useMemo(()=>_(o),[o]),l=h&&!a?[]:i.map(P),u=n.useRef(!0),f=n.useRef(i),x=I(()=>new Map),[F,q]=n.useState(i),[C,j]=n.useState(i);N(()=>{u.current=!1,f.current=i;for(let d=0;d<C.length;d++){const p=P(C[d]);l.includes(p)?x.delete(p):x.get(p)!==!0&&x.set(p,!1)}},[C,l.length,l.join("-")]);const T=[];if(i!==F){let d=[...i];for(let p=0;p<C.length;p++){const g=C[p],E=P(g);l.includes(E)||(d.splice(p,0,g),T.push(g))}return r==="wait"&&T.length&&(d=T),j(_(d)),q(i),null}const{forceRender:v}=n.useContext(U);return R.jsx(R.Fragment,{children:C.map(d=>{const p=P(d),g=h&&!a?!1:i===C||l.includes(p),E=()=>{if(x.has(p))x.set(p,!0);else return;let M=!0;x.forEach(L=>{L||(M=!1)}),M&&(v==null||v(),j(f.current),h&&(m==null||m()),e&&e())};return R.jsx(K,{isPresent:g,initial:!u.current||t?void 0:!1,custom:c,presenceAffectsLayout:s,mode:r,onExitComplete:g?void 0:E,anchorX:y,children:d},p)})})};var S={exports:{}},w,O;function G(){if(O)return w;O=1;var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return w=o,w}var b,W;function X(){if(W)return b;W=1;var o=G();function c(){}function t(){}return t.resetWarningCache=c,b=function(){function e(h,y,a,m,i,l){if(l!==o){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function s(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:c};return r.PropTypes=r,r},b}var k;function Y(){return k||(k=1,S.exports=X()()),S.exports}var J=Y();const ee=A(J);export{Z as A,ee as P};
